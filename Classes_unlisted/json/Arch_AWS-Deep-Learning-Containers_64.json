{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Basic CloudFormation template for AWS Deep Learning Containers.",
  "Resources": {
    "ECSCluster": {
      "Type": "AWS::ECS::Cluster",
      "Properties": {
        "ClusterName": "MyDLCluster"  // Replace with your desired cluster name
      }
    },
    "TaskDefinition": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "Family": "MyDLTaskDefinition",  // Replace with your desired task definition name
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": [
          "FARGATE"
        ],
        "Cpu": "256",  // Adjust based on your needs
        "Memory": "512",  // Adjust based on your needs
        "ContainerDefinitions": [
          {
            "Name": "MyDLContainer",
            "Image": "763104351884.dkr.ecr.<region>.amazonaws.com/pytorch-training:1.9.1-cpu-py37-ubuntu18.04",  // Replace with your desired DL container image
            "Essential": true,
            "EntryPoint": [
              "python3",
              "my_script.py"  // Replace with your entry point script
            ],
            "LogConfiguration": {
              "LogDriver": "awslogs",
              "Options": {
                "awslogs-group": {
                  "Ref": "LogGroup"
                },
                "awslogs-region": {
                  "Ref": "AWS::Region"
                },
                "awslogs-stream-prefix": "ecs"
              }
            }
          }
        ]
      }
    },
    "LogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "MyDLLogGroup",  // Replace with your desired log group name
        "RetentionInDays": 7  // Adjust retention period as needed
      }
    }
  }
}
